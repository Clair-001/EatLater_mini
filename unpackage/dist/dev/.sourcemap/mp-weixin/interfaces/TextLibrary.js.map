{"version":3,"file":"TextLibrary.js","sources":["interfaces/TextLibrary.js"],"sourcesContent":["/**\r\n * 文案库接口\r\n * 定义文案库的核心功能\r\n */\r\nexport class TextLibrary {\r\n    constructor() {\r\n        this.guidanceTexts = [];\r\n        this.initializeDefaultTexts();\r\n    }\r\n\r\n    /**\r\n     * 获取随机引导文案\r\n     * @returns {string} 随机引导文案\r\n     */\r\n    getRandomGuidanceText() {\r\n        if (this.guidanceTexts.length === 0) {\r\n            return this.getDefaultText();\r\n        }\r\n\r\n        const randomIndex = Math.floor(Math.random() * this.guidanceTexts.length);\r\n        return this.guidanceTexts[randomIndex];\r\n    }\r\n\r\n    /**\r\n     * 获取所有引导文案\r\n     * @returns {Array<string>} 所有引导文案\r\n     */\r\n    getAllGuidanceTexts() {\r\n        return [...this.guidanceTexts];\r\n    }\r\n\r\n    /**\r\n     * 添加新的引导文案\r\n     * @param {string} text - 新的引导文案\r\n     */\r\n    addGuidanceText(text) {\r\n        if (text && typeof text === 'string' && text.trim().length > 0) {\r\n            this.guidanceTexts.push(text.trim());\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 获取默认文案\r\n     * @returns {string} 默认文案\r\n     */\r\n    getDefaultText() {\r\n        return '先缓一缓，现在不急，晚点再决定';\r\n    }\r\n\r\n    /**\r\n     * 验证文案是否有效\r\n     * @param {string} text - 待验证的文案\r\n     * @returns {boolean} 文案是否有效\r\n     */\r\n    isValidText(text) {\r\n        return !!(text && typeof text === 'string' && text.trim().length > 0);\r\n    }\r\n\r\n    /**\r\n     * 初始化默认文案\r\n     */\r\n    initializeDefaultTexts() {\r\n        const defaultTexts = [\r\n            '先缓一缓，现在不急，晚点再决定',\r\n            '深呼吸一下，给自己一点时间思考',\r\n            '也许过一会儿就不那么想吃了',\r\n            '现在暂停一下，听听身体真正的需要',\r\n            '等等再说，先做点别的事情',\r\n            '给自己一个选择的机会，稍后再看',\r\n            '这个想法可以先放一放',\r\n            '让时间帮你做决定'\r\n        ];\r\n\r\n        this.guidanceTexts = [...defaultTexts];\r\n    }\r\n\r\n    /**\r\n     * 清空所有文案\r\n     */\r\n    clearAllTexts() {\r\n        this.guidanceTexts = [];\r\n    }\r\n\r\n    /**\r\n     * 重置为默认文案\r\n     */\r\n    resetToDefault() {\r\n        this.guidanceTexts = [];\r\n        this.initializeDefaultTexts();\r\n    }\r\n\r\n    /**\r\n     * 清理缓存\r\n     * 清理可能存在的临时缓存数据\r\n     */\r\n    clearCache() {\r\n        try {\r\n            console.log('清理文案库缓存');\r\n\r\n            // 清理可能存在的文案选择缓存\r\n            const cacheKeys = [\r\n                'lastSelectedText',\r\n                'textSelectionHistory',\r\n                'recentTexts'\r\n            ];\r\n\r\n            cacheKeys.forEach(key => {\r\n                try {\r\n                    if (typeof uni !== 'undefined' && uni.removeStorageSync) {\r\n                        uni.removeStorageSync(key);\r\n                    }\r\n                } catch (error) {\r\n                    console.warn(`清理文案缓存失败: ${key}`, error);\r\n                }\r\n            });\r\n\r\n            console.log('文案库缓存清理完成');\r\n\r\n        } catch (error) {\r\n            console.error('清理文案库缓存时发生错误:', error);\r\n        }\r\n    }\r\n}"],"names":["uni"],"mappings":";;AAIO,MAAM,YAAY;AAAA,EACrB,cAAc;AACV,SAAK,gBAAgB;AACrB,SAAK,uBAAsB;AAAA,EAC9B;AAAA;AAAA;AAAA;AAAA;AAAA,EAMD,wBAAwB;AACpB,QAAI,KAAK,cAAc,WAAW,GAAG;AACjC,aAAO,KAAK;IACf;AAED,UAAM,cAAc,KAAK,MAAM,KAAK,OAAM,IAAK,KAAK,cAAc,MAAM;AACxE,WAAO,KAAK,cAAc,WAAW;AAAA,EACxC;AAAA;AAAA;AAAA;AAAA;AAAA,EAMD,sBAAsB;AAClB,WAAO,CAAC,GAAG,KAAK,aAAa;AAAA,EAChC;AAAA;AAAA;AAAA;AAAA;AAAA,EAMD,gBAAgB,MAAM;AAClB,QAAI,QAAQ,OAAO,SAAS,YAAY,KAAK,KAAM,EAAC,SAAS,GAAG;AAC5D,WAAK,cAAc,KAAK,KAAK,KAAM,CAAA;AAAA,IACtC;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA;AAAA,EAMD,iBAAiB;AACb,WAAO;AAAA,EACV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOD,YAAY,MAAM;AACd,WAAO,CAAC,EAAE,QAAQ,OAAO,SAAS,YAAY,KAAK,KAAM,EAAC,SAAS;AAAA,EACtE;AAAA;AAAA;AAAA;AAAA,EAKD,yBAAyB;AACrB,UAAM,eAAe;AAAA,MACjB;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACZ;AAEQ,SAAK,gBAAgB,CAAC,GAAG,YAAY;AAAA,EACxC;AAAA;AAAA;AAAA;AAAA,EAKD,gBAAgB;AACZ,SAAK,gBAAgB;EACxB;AAAA;AAAA;AAAA;AAAA,EAKD,iBAAiB;AACb,SAAK,gBAAgB;AACrB,SAAK,uBAAsB;AAAA,EAC9B;AAAA;AAAA;AAAA;AAAA;AAAA,EAMD,aAAa;AACT,QAAI;AACAA,oBAAAA,sDAAY,SAAS;AAGrB,YAAM,YAAY;AAAA,QACd;AAAA,QACA;AAAA,QACA;AAAA,MAChB;AAEY,gBAAU,QAAQ,SAAO;AACrB,YAAI;AACA,cAAI,OAAOA,cAAG,UAAK,eAAeA,cAAAA,MAAI,mBAAmB;AACrDA,gCAAI,kBAAkB,GAAG;AAAA,UAC5B;AAAA,QACJ,SAAQ,OAAO;AACZA,8BAAa,MAAA,QAAA,oCAAA,aAAa,GAAG,IAAI,KAAK;AAAA,QACzC;AAAA,MACjB,CAAa;AAEDA,oBAAAA,MAAA,MAAA,OAAA,oCAAY,WAAW;AAAA,IAE1B,SAAQ,OAAO;AACZA,oBAAc,MAAA,MAAA,SAAA,oCAAA,iBAAiB,KAAK;AAAA,IACvC;AAAA,EACJ;AACL;;"}