{"version":3,"file":"InterventionState.js","sources":["models/InterventionState.js"],"sourcesContent":["/**\r\n * 应用状态枚举\r\n * 定义应用的各种状态\r\n */\r\nexport const InterventionState = {\r\n    // 加载中状态\r\n    LOADING: 'loading',\r\n\r\n    // 输入准备状态\r\n    INPUT_READY: 'inputReady',\r\n\r\n    // 内容显示状态\r\n    CONTENT_DISPLAYED: 'contentDisplayed',\r\n\r\n    // 完成状态\r\n    COMPLETED: 'completed'\r\n};\r\n\r\n/**\r\n * 状态管理器类\r\n * 用于管理应用状态转换\r\n */\r\nexport class StateManager {\r\n    constructor() {\r\n        this.currentState = InterventionState.LOADING;\r\n        this.stateHistory = [InterventionState.LOADING];\r\n    }\r\n\r\n    /**\r\n     * 转换到新状态\r\n     * @param {string} newState - 新状态\r\n     * @returns {boolean} 转换是否成功\r\n     */\r\n    transitionTo(newState) {\r\n        if (this.isValidTransition(this.currentState, newState)) {\r\n            this.stateHistory.push(newState);\r\n            this.currentState = newState;\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * 获取当前状态\r\n     * @returns {string} 当前状态\r\n     */\r\n    getCurrentState() {\r\n        return this.currentState;\r\n    }\r\n\r\n    /**\r\n     * 验证状态转换是否有效\r\n     * @param {string} fromState - 源状态\r\n     * @param {string} toState - 目标状态\r\n     * @returns {boolean} 转换是否有效\r\n     */\r\n    isValidTransition(fromState, toState) {\r\n        const validTransitions = {\r\n            [InterventionState.LOADING]: [InterventionState.INPUT_READY],\r\n            [InterventionState.INPUT_READY]: [InterventionState.CONTENT_DISPLAYED, InterventionState.COMPLETED],\r\n            [InterventionState.CONTENT_DISPLAYED]: [InterventionState.COMPLETED, InterventionState.INPUT_READY],\r\n            [InterventionState.COMPLETED]: [InterventionState.INPUT_READY]\r\n        };\r\n\r\n        return validTransitions[fromState] && validTransitions[fromState].includes(toState);\r\n    }\r\n\r\n    /**\r\n     * 重置状态管理器\r\n     */\r\n    reset() {\r\n        this.currentState = InterventionState.INPUT_READY;\r\n        this.stateHistory = [InterventionState.INPUT_READY];\r\n        console.log('状态管理器已重置到 INPUT_READY 状态');\r\n    }\r\n}"],"names":["uni"],"mappings":";;AAIY,MAAC,oBAAoB;AAAA;AAAA,EAE7B,SAAS;AAAA;AAAA,EAGT,aAAa;AAAA;AAAA,EAGb,mBAAmB;AAAA;AAAA,EAGnB,WAAW;AACf;AAMO,MAAM,aAAa;AAAA,EACtB,cAAc;AACV,SAAK,eAAe,kBAAkB;AACtC,SAAK,eAAe,CAAC,kBAAkB,OAAO;AAAA,EACjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOD,aAAa,UAAU;AACnB,QAAI,KAAK,kBAAkB,KAAK,cAAc,QAAQ,GAAG;AACrD,WAAK,aAAa,KAAK,QAAQ;AAC/B,WAAK,eAAe;AACpB,aAAO;AAAA,IACV;AACD,WAAO;AAAA,EACV;AAAA;AAAA;AAAA;AAAA;AAAA,EAMD,kBAAkB;AACd,WAAO,KAAK;AAAA,EACf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQD,kBAAkB,WAAW,SAAS;AAClC,UAAM,mBAAmB;AAAA,MACrB,CAAC,kBAAkB,OAAO,GAAG,CAAC,kBAAkB,WAAW;AAAA,MAC3D,CAAC,kBAAkB,WAAW,GAAG,CAAC,kBAAkB,mBAAmB,kBAAkB,SAAS;AAAA,MAClG,CAAC,kBAAkB,iBAAiB,GAAG,CAAC,kBAAkB,WAAW,kBAAkB,WAAW;AAAA,MAClG,CAAC,kBAAkB,SAAS,GAAG,CAAC,kBAAkB,WAAW;AAAA,IACzE;AAEQ,WAAO,iBAAiB,SAAS,KAAK,iBAAiB,SAAS,EAAE,SAAS,OAAO;AAAA,EACrF;AAAA;AAAA;AAAA;AAAA,EAKD,QAAQ;AACJ,SAAK,eAAe,kBAAkB;AACtC,SAAK,eAAe,CAAC,kBAAkB,WAAW;AAClDA,kBAAAA,MAAA,MAAA,OAAA,qCAAY,0BAA0B;AAAA,EACzC;AACL;;;"}