{"version":3,"file":"index.js","sources":["pages/index/index.vue","../../../Program/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvaW5kZXgvaW5kZXgudnVl"],"sourcesContent":["<template>\r\n\t<view class=\"container\">\r\n\t\t<!-- 加载状态 -->\r\n\t\t<view v-if=\"currentState === 'loading'\" class=\"loading-container\">\r\n\t\t\t<text class=\"loading-text\">正在加载...</text>\r\n\t\t</view>\r\n\r\n\t\t<!-- 输入界面 -->\r\n\t\t<view v-else-if=\"currentState === 'inputReady'\" class=\"input-container\">\r\n\t\t\t<!-- 应用标题 -->\r\n\t\t\t<view class=\"header\">\r\n\t\t\t\t<text class=\"app-title\">EatLater</text>\r\n\t\t\t\t<text class=\"app-subtitle\">给自己一点时间思考</text>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- 食物输入区域 -->\r\n\t\t\t<view class=\"input-section\">\r\n\t\t\t\t<text class=\"input-label\">您想吃什么？</text>\r\n\t\t\t\t<input \r\n\t\t\t\t\tclass=\"food-input\" \r\n\t\t\t\t\tv-model=\"foodInputText\"\r\n\t\t\t\t\tplaceholder=\"请输入食物名称\"\r\n\t\t\t\t\t@confirm=\"handleInputConfirm\"\r\n\t\t\t\t\t@input=\"clearError\"\r\n\t\t\t\t\t@blur=\"handleInputBlur\"\r\n\t\t\t\t\tmaxlength=\"50\"\r\n\t\t\t\t\tconfirm-type=\"done\"\r\n\t\t\t\t/>\r\n\t\t\t\t\r\n\t\t\t\t<!-- 错误提示 -->\r\n\t\t\t\t<text v-if=\"errorMessage\" class=\"error-message\">{{ errorMessage }}</text>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- 快捷按钮区域 -->\r\n\t\t\t<view class=\"quick-buttons-section\">\r\n\t\t\t\t<text class=\"quick-buttons-label\">或选择常见食物：</text>\r\n\t\t\t\t<view class=\"quick-buttons-grid\">\r\n\t\t\t\t\t<button \r\n\t\t\t\t\t\tv-for=\"food in quickSelectFoods\" \r\n\t\t\t\t\t\t:key=\"food\"\r\n\t\t\t\t\t\tclass=\"quick-button\"\r\n\t\t\t\t\t\t@click=\"handleQuickSelect(food)\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{{ food }}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 干预内容显示界面 -->\r\n\t\t<view v-else-if=\"currentState === 'contentDisplayed'\" class=\"content-container\" @touchstart=\"handleTouchStart\" @touchend=\"handleTouchEnd\">\r\n\t\t\t<!-- 图片显示区域 -->\r\n\t\t\t<view class=\"image-section\">\r\n\t\t\t\t<image \r\n\t\t\t\t\tv-if=\"currentContent && currentContent.imageResource\"\r\n\t\t\t\t\t:src=\"currentContent.imageResource\" \r\n\t\t\t\t\tclass=\"intervention-image\"\r\n\t\t\t\t\tmode=\"aspectFit\"\r\n\t\t\t\t\t@error=\"handleImageError\"\r\n\t\t\t\t\t@load=\"handleImageLoad\"\r\n\t\t\t\t/>\r\n\t\t\t\t<view v-else class=\"image-placeholder\">\r\n\t\t\t\t\t<text class=\"placeholder-text\">图片加载中...</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- 文案显示区域 -->\r\n\t\t\t<view class=\"text-section\">\r\n\t\t\t\t<text v-if=\"currentContent && currentContent.guidanceText\" class=\"guidance-text\">\r\n\t\t\t\t\t{{ currentContent.guidanceText }}\r\n\t\t\t\t</text>\r\n\t\t\t\t<text v-else class=\"guidance-text\">\r\n\t\t\t\t\t先缓一缓，现在不急，晚点再决定\r\n\t\t\t\t</text>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- 退出按钮区域 -->\r\n\t\t\t<view class=\"exit-section\">\r\n\t\t\t\t<button class=\"exit-button\" @click=\"handleExit\" @tap=\"handleExit\">\r\n\t\t\t\t\t好的，我再想想\r\n\t\t\t\t</button>\r\n\t\t\t\t<button class=\"restart-button\" @click=\"handleRestart\" @tap=\"handleRestart\">\r\n\t\t\t\t\t重新选择\r\n\t\t\t\t</button>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<!-- 手势提示 -->\r\n\t\t\t<view class=\"gesture-hint\">\r\n\t\t\t\t<text class=\"hint-text\">向下滑动也可以退出</text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 完成状态 -->\r\n\t\t<view v-else-if=\"currentState === 'completed'\" class=\"completed-container\">\r\n\t\t\t<text class=\"completed-text\">感谢使用 EatLater</text>\r\n\t\t\t<button class=\"restart-button\" @click=\"handleRestart\">\r\n\t\t\t\t重新开始\r\n\t\t\t</button>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport { InterventionViewModel } from '../../viewmodels/InterventionViewModel.js';\r\n\timport { InterventionState } from '../../models/InterventionState.js';\r\n\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\t// ViewModel 实例\r\n\t\t\t\tviewModel: null,\r\n\t\t\t\t\r\n\t\t\t\t// 界面状态\r\n\t\t\t\tcurrentState: InterventionState.LOADING,\r\n\t\t\t\t\r\n\t\t\t\t// 用户输入\r\n\t\t\t\tfoodInputText: '',\r\n\t\t\t\t\r\n\t\t\t\t// 快捷选择食物列表\r\n\t\t\t\tquickSelectFoods: [],\r\n\t\t\t\t\r\n\t\t\t\t// 当前干预内容\r\n\t\t\t\tcurrentContent: null,\r\n\t\t\t\t\r\n\t\t\t\t// 错误信息\r\n\t\t\t\terrorMessage: '',\r\n\t\t\t\t\r\n\t\t\t\t// 手势相关\r\n\t\t\t\ttouchStartY: 0,\r\n\t\t\t\ttouchStartTime: 0\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tonLoad() {\r\n\t\t\tthis.initializeViewModel();\r\n\t\t},\r\n\t\t\r\n\t\tonUnload() {\r\n\t\t\tconsole.log('页面卸载，开始清理');\r\n\t\t\tthis.cleanupViewModel();\r\n\t\t\tthis.clearLocalTemporaryData();\r\n\t\t},\r\n\t\t\r\n\t\tmethods: {\r\n\t\t\t/**\r\n\t\t\t * 初始化 ViewModel\r\n\t\t\t */\r\n\t\t\tasync initializeViewModel() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// 设置加载状态\r\n\t\t\t\t\tthis.currentState = InterventionState.LOADING;\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 创建 ViewModel 实例\r\n\t\t\t\t\tthis.viewModel = new InterventionViewModel();\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 设置事件监听器\r\n\t\t\t\t\tthis.setupEventListeners();\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 获取快捷选择食物列表\r\n\t\t\t\t\tthis.quickSelectFoods = this.viewModel.getQuickSelectFoods();\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 等待初始化完成\r\n\t\t\t\t\tawait this.$nextTick();\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 设置为输入准备状态\r\n\t\t\t\t\tthis.currentState = InterventionState.INPUT_READY;\r\n\t\t\t\t\t\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error('初始化 ViewModel 失败:', error);\r\n\t\t\t\t\tthis.errorMessage = '应用初始化失败，请重试';\r\n\t\t\t\t\tthis.currentState = InterventionState.INPUT_READY;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * 设置事件监听器\r\n\t\t\t */\r\n\t\t\tsetupEventListeners() {\r\n\t\t\t\tif (!this.viewModel) return;\r\n\t\t\t\t\r\n\t\t\t\t// 监听状态变化\r\n\t\t\t\tthis.viewModel.addEventListener('stateChanged', (data) => {\r\n\t\t\t\t\tthis.currentState = data.newState;\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t// 监听内容准备完成\r\n\t\t\t\tthis.viewModel.addEventListener('contentReady', (content) => {\r\n\t\t\t\t\tthis.currentContent = content;\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t// 监听错误事件\r\n\t\t\t\tthis.viewModel.addEventListener('error', (message) => {\r\n\t\t\t\t\tthis.errorMessage = message;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * 清理 ViewModel\r\n\t\t\t */\r\n\t\t\tcleanupViewModel() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (this.viewModel) {\r\n\t\t\t\t\t\tconsole.log('清理 ViewModel');\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// 深度清理会话数据\r\n\t\t\t\t\t\tthis.viewModel.deepCleanSessionData();\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// 移除所有事件监听器\r\n\t\t\t\t\t\tthis.viewModel.removeAllEventListeners();\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// 清空 ViewModel 引用\r\n\t\t\t\t\t\tthis.viewModel = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tconsole.log('ViewModel 清理完成');\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error('清理 ViewModel 时发生错误:', error);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * 处理输入确认\r\n\t\t\t */\r\n\t\t\tasync handleInputConfirm() {\r\n\t\t\t\tif (!this.viewModel) {\r\n\t\t\t\t\tthis.errorMessage = '系统未初始化，请重试';\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// 清除之前的错误信息\r\n\t\t\t\tthis.clearError();\r\n\t\t\t\t\r\n\t\t\t\tconst foodName = this.foodInputText.trim();\r\n\t\t\t\t\r\n\t\t\t\t// 基本输入验证\r\n\t\t\t\tif (!foodName) {\r\n\t\t\t\t\tthis.errorMessage = '请输入您想吃的食物';\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (foodName.length > 50) {\r\n\t\t\t\t\tthis.errorMessage = '食物名称过长，请输入50个字符以内';\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// 检查特殊字符\r\n\t\t\t\tconst invalidChars = /[<>\\\"'&]/;\r\n\t\t\t\tif (invalidChars.test(foodName)) {\r\n\t\t\t\t\tthis.errorMessage = '食物名称包含无效字符';\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// 显示加载状态\r\n\t\t\t\t\tthis.currentState = 'loading';\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 调用 ViewModel 处理输入\r\n\t\t\t\t\tconst success = await this.viewModel.handleFoodInput(foodName);\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (success) {\r\n\t\t\t\t\t\t// 清空输入框\r\n\t\t\t\t\t\tthis.foodInputText = '';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// 如果处理失败，恢复到输入状态\r\n\t\t\t\t\t\tthis.currentState = 'inputReady';\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error('处理食物输入时发生错误:', error);\r\n\t\t\t\t\tthis.errorMessage = '处理输入时发生错误，请重试';\r\n\t\t\t\t\tthis.currentState = 'inputReady';\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * 处理快捷选择\r\n\t\t\t */\r\n\t\t\tasync handleQuickSelect(foodName) {\r\n\t\t\t\tif (!this.viewModel) {\r\n\t\t\t\t\tthis.errorMessage = '系统未初始化，请重试';\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// 清除之前的错误信息\r\n\t\t\t\tthis.clearError();\r\n\t\t\t\t\r\n\t\t\t\t// 验证快捷选择的食物名称\r\n\t\t\t\tif (!foodName || typeof foodName !== 'string') {\r\n\t\t\t\t\tthis.errorMessage = '无效的食物选择';\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// 显示加载状态\r\n\t\t\t\t\tthis.currentState = 'loading';\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 设置输入框内容（用于用户查看）\r\n\t\t\t\t\tthis.foodInputText = foodName;\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 调用 ViewModel 处理快捷选择\r\n\t\t\t\t\tconst success = await this.viewModel.handleQuickSelectFood(foodName);\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (success) {\r\n\t\t\t\t\t\t// 清空输入框\r\n\t\t\t\t\t\tthis.foodInputText = '';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// 如果处理失败，恢复到输入状态\r\n\t\t\t\t\t\tthis.currentState = 'inputReady';\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error('处理快捷选择时发生错误:', error);\r\n\t\t\t\t\tthis.errorMessage = '处理选择时发生错误，请重试';\r\n\t\t\t\t\tthis.currentState = 'inputReady';\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * 处理退出\r\n\t\t\t */\r\n\t\t\thandleExit() {\r\n\t\t\t\tconsole.log('用户点击退出按钮');\r\n\t\t\t\t\r\n\t\t\t\t// 添加用户反馈\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '正在退出...',\r\n\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\tduration: 1000\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tif (!this.viewModel) {\r\n\t\t\t\t\tconsole.error('ViewModel 未初始化');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// 调用 ViewModel 的退出处理\r\n\t\t\t\t\tthis.viewModel.handleExit();\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 清理界面状态\r\n\t\t\t\t\tthis.foodInputText = '';\r\n\t\t\t\t\tthis.currentContent = null;\r\n\t\t\t\t\tthis.clearError();\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 实现自然退出 - 直接关闭小程序\r\n\t\t\t\t\tthis.exitApplication();\r\n\t\t\t\t\t\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error('处理退出时发生错误:', error);\r\n\t\t\t\t\tthis.errorMessage = '退出时发生错误';\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * 退出应用程序\r\n\t\t\t * 实现自然退出功能，直接关闭小程序\r\n\t\t\t */\r\n\t\t\texitApplication() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// 显示简短的退出提示\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '感谢使用',\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\tduration: 1000,\r\n\t\t\t\t\t\tmask: false\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 延迟关闭，让用户看到提示\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t// 调用 App 的退出处理方法\r\n\t\t\t\t\t\tconst app = getApp();\r\n\t\t\t\t\t\tif (app && app.handleAppExit) {\r\n\t\t\t\t\t\t\tapp.handleAppExit();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// 直接尝试关闭小程序\r\n\t\t\t\t\t\t\tif (typeof wx !== 'undefined' && wx.exitMiniProgram) {\r\n\t\t\t\t\t\t\t\twx.exitMiniProgram({\r\n\t\t\t\t\t\t\t\t\tsuccess: () => {\r\n\t\t\t\t\t\t\t\t\t\tconsole.log('小程序已关闭');\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tfail: (error) => {\r\n\t\t\t\t\t\t\t\t\t\tconsole.warn('关闭小程序失败，使用备用方案:', error);\r\n\t\t\t\t\t\t\t\t\t\tthis.fallbackExit();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.fallbackExit();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error('退出应用时发生错误:', error);\r\n\t\t\t\t\tthis.fallbackExit();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * 备用退出方案\r\n\t\t\t * 当无法直接关闭小程序时的处理\r\n\t\t\t */\r\n\t\t\tfallbackExit() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// 清理所有状态\r\n\t\t\t\t\tthis.cleanupAllState();\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 导航到一个简单的退出页面或重新启动\r\n\t\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\t\turl: '/pages/index/index',\r\n\t\t\t\t\t\tsuccess: () => {\r\n\t\t\t\t\t\t\t// 重新启动后立即显示感谢信息\r\n\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\ttitle: '感谢使用',\r\n\t\t\t\t\t\t\t\t\tcontent: '您可以关闭小程序了',\r\n\t\t\t\t\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t\t\t\t\t\tconfirmText: '知道了'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}, 500);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error('备用退出方案失败:', error);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * 清理所有状态\r\n\t\t\t */\r\n\t\t\tcleanupAllState() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// 清理界面状态\r\n\t\t\t\t\tthis.foodInputText = '';\r\n\t\t\t\t\tthis.currentContent = null;\r\n\t\t\t\t\tthis.clearError();\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 重置手势相关数据\r\n\t\t\t\t\tthis.touchStartY = 0;\r\n\t\t\t\t\tthis.touchStartTime = 0;\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 深度清理 ViewModel\r\n\t\t\t\t\tif (this.viewModel) {\r\n\t\t\t\t\t\tthis.viewModel.deepCleanSessionData();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 清理本地存储中的临时数据\r\n\t\t\t\t\tthis.clearLocalTemporaryData();\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 调用 App 级别的清理\r\n\t\t\t\t\tconst app = getApp();\r\n\t\t\t\t\tif (app && app.clearUserState) {\r\n\t\t\t\t\t\tapp.clearUserState();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tconsole.log('所有状态已清理');\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error('清理状态时发生错误:', error);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * 清理本地临时数据\r\n\t\t\t */\r\n\t\t\tclearLocalTemporaryData() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// 清理页面级别的临时数据\r\n\t\t\t\t\tconst tempKeys = [\r\n\t\t\t\t\t\t'pageState',\r\n\t\t\t\t\t\t'tempInput',\r\n\t\t\t\t\t\t'lastError',\r\n\t\t\t\t\t\t'gestureData',\r\n\t\t\t\t\t\t'uiCache'\r\n\t\t\t\t\t];\r\n\t\t\t\t\t\r\n\t\t\t\t\ttempKeys.forEach(key => {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tuni.removeStorageSync(key);\r\n\t\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\t\tconsole.warn(`清理页面临时数据失败: ${key}`, error);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error('清理本地临时数据时发生错误:', error);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * 处理重新开始\r\n\t\t\t */\r\n\t\t\thandleRestart() {\r\n\t\t\t\tconsole.log('用户点击重新选择按钮');\r\n\t\t\t\t\r\n\t\t\t\t// 添加用户反馈\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '重新开始',\r\n\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\tduration: 1000\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tif (!this.viewModel) {\r\n\t\t\t\t\tconsole.error('ViewModel 未初始化');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// 清理界面状态\r\n\t\t\t\t\tthis.foodInputText = '';\r\n\t\t\t\t\tthis.currentContent = null;\r\n\t\t\t\t\tthis.clearError();\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 重置 ViewModel\r\n\t\t\t\t\tthis.viewModel.reset();\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 强制更新界面状态\r\n\t\t\t\t\tthis.currentState = InterventionState.INPUT_READY;\r\n\t\t\t\t\t\r\n\t\t\t\t\tconsole.log('重新开始完成，当前状态:', this.currentState);\r\n\t\t\t\t\t\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error('处理重新开始时发生错误:', error);\r\n\t\t\t\t\tthis.errorMessage = '重新开始时发生错误';\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 强制回到输入状态\r\n\t\t\t\t\tthis.currentState = InterventionState.INPUT_READY;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * 处理输入失焦\r\n\t\t\t */\r\n\t\t\thandleInputBlur() {\r\n\t\t\t\t// 输入失焦时不自动提交，让用户主动确认\r\n\t\t\t\t// 这里可以添加其他失焦处理逻辑\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * 清除错误信息\r\n\t\t\t */\r\n\t\t\tclearError() {\r\n\t\t\t\tthis.errorMessage = '';\r\n\t\t\t\tif (this.viewModel) {\r\n\t\t\t\t\tthis.viewModel.clearError();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * 处理图片加载错误\r\n\t\t\t */\r\n\t\t\thandleImageError(error) {\r\n\t\t\t\tconsole.error('图片加载失败:', error);\r\n\t\t\t\t\r\n\t\t\t\t// 尝试使用默认图片\r\n\t\t\t\tif (this.viewModel && this.currentContent) {\r\n\t\t\t\t\t// 获取默认图片路径\r\n\t\t\t\t\tconst defaultImage = '/static/images/default_unappetizing.jpg';\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 更新当前内容的图片资源\r\n\t\t\t\t\tthis.currentContent.imageResource = defaultImage;\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 可以显示错误提示\r\n\t\t\t\t\t// this.errorMessage = '图片加载失败，已使用默认图片';\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * 处理图片加载成功\r\n\t\t\t */\r\n\t\t\thandleImageLoad() {\r\n\t\t\t\t// 图片加载成功，可以添加一些处理逻辑\r\n\t\t\t\tconsole.log('图片加载成功');\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * 处理触摸开始\r\n\t\t\t */\r\n\t\t\thandleTouchStart(event) {\r\n\t\t\t\t// 检查触摸是否在按钮区域，如果是则不处理手势\r\n\t\t\t\tconst target = event.target;\r\n\t\t\t\tif (target && (target.classList.contains('exit-button') || target.classList.contains('restart-button'))) {\r\n\t\t\t\t\tconsole.log('触摸在按钮区域，跳过手势处理');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (event.touches && event.touches.length > 0) {\r\n\t\t\t\t\tthis.touchStartY = event.touches[0].clientY;\r\n\t\t\t\t\tthis.touchStartTime = Date.now();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * 处理触摸结束\r\n\t\t\t */\r\n\t\t\thandleTouchEnd(event) {\r\n\t\t\t\t// 检查触摸是否在按钮区域，如果是则不处理手势\r\n\t\t\t\tconst target = event.target;\r\n\t\t\t\tif (target && (target.classList.contains('exit-button') || target.classList.contains('restart-button'))) {\r\n\t\t\t\t\tconsole.log('触摸结束在按钮区域，跳过手势处理');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (event.changedTouches && event.changedTouches.length > 0) {\r\n\t\t\t\t\tconst touchEndY = event.changedTouches[0].clientY;\r\n\t\t\t\t\tconst touchEndTime = Date.now();\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 计算滑动距离和时间\r\n\t\t\t\t\tconst deltaY = touchEndY - this.touchStartY;\r\n\t\t\t\t\tconst deltaTime = touchEndTime - this.touchStartTime;\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 检查是否为向下滑动手势\r\n\t\t\t\t\t// 条件：向下滑动超过100px，时间少于500ms\r\n\t\t\t\t\tif (deltaY > 100 && deltaTime < 500) {\r\n\t\t\t\t\t\tconsole.log('检测到向下滑动手势，触发退出');\r\n\t\t\t\t\t\tthis.handleExit();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t/* 容器样式 */\r\n\t.container {\r\n\t\tmin-height: 100vh;\r\n\t\tbackground-color: #f8f9fa;\r\n\t\tpadding: 40rpx 30rpx;\r\n\t\tbox-sizing: border-box;\r\n\t}\r\n\r\n\t/* 加载状态样式 */\r\n\t.loading-container {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\theight: 60vh;\r\n\t}\r\n\r\n\t.loading-text {\r\n\t\tfont-size: 32rpx;\r\n\t\tcolor: #666;\r\n\t}\r\n\r\n\t/* 输入界面样式 */\r\n\t.input-container {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.header {\r\n\t\ttext-align: center;\r\n\t\tmargin-bottom: 80rpx;\r\n\t}\r\n\r\n\t.app-title {\r\n\t\tdisplay: block;\r\n\t\tfont-size: 48rpx;\r\n\t\tfont-weight: bold;\r\n\t\tcolor: #2c3e50;\r\n\t\tmargin-bottom: 20rpx;\r\n\t}\r\n\r\n\t.app-subtitle {\r\n\t\tdisplay: block;\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #7f8c8d;\r\n\t}\r\n\r\n\t/* 输入区域样式 */\r\n\t.input-section {\r\n\t\twidth: 100%;\r\n\t\tmargin-bottom: 60rpx;\r\n\t}\r\n\r\n\t.input-label {\r\n\t\tdisplay: block;\r\n\t\tfont-size: 32rpx;\r\n\t\tcolor: #34495e;\r\n\t\tmargin-bottom: 30rpx;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.food-input {\r\n\t\twidth: 100%;\r\n\t\theight: 80rpx;\r\n\t\tborder: 2rpx solid #ddd;\r\n\t\tborder-radius: 12rpx;\r\n\t\tpadding: 0 30rpx;\r\n\t\tfont-size: 30rpx;\r\n\t\tbackground-color: #fff;\r\n\t\tbox-sizing: border-box;\r\n\t}\r\n\r\n\t.food-input:focus {\r\n\t\tborder-color: #3498db;\r\n\t\toutline: none;\r\n\t}\r\n\r\n\t.error-message {\r\n\t\tdisplay: block;\r\n\t\tcolor: #e74c3c;\r\n\t\tfont-size: 26rpx;\r\n\t\tmargin-top: 20rpx;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t/* 快捷按钮区域样式 */\r\n\t.quick-buttons-section {\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t.quick-buttons-label {\r\n\t\tdisplay: block;\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #7f8c8d;\r\n\t\tmargin-bottom: 30rpx;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.quick-buttons-grid {\r\n\t\tdisplay: flex;\r\n\t\tflex-wrap: wrap;\r\n\t\tjustify-content: center;\r\n\t\tgap: 20rpx;\r\n\t}\r\n\r\n\t.quick-button {\r\n\t\tbackground-color: #ecf0f1;\r\n\t\tborder: none;\r\n\t\tborder-radius: 25rpx;\r\n\t\tpadding: 20rpx 30rpx;\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #2c3e50;\r\n\t\tmin-width: 120rpx;\r\n\t}\r\n\r\n\t.quick-button:active {\r\n\t\tbackground-color: #bdc3c7;\r\n\t}\r\n\r\n\t/* 干预内容显示样式 */\r\n\t.content-container {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\theight: 100vh;\r\n\t\tjustify-content: space-between;\r\n\t}\r\n\r\n\t.image-section {\r\n\t\tflex: 1;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\twidth: 100%;\r\n\t\tmargin-bottom: 40rpx;\r\n\t}\r\n\r\n\t.intervention-image {\r\n\t\twidth: 90%;\r\n\t\tmax-height: 400rpx;\r\n\t\tborder-radius: 12rpx;\r\n\t}\r\n\r\n\t.image-placeholder {\r\n\t\twidth: 90%;\r\n\t\theight: 400rpx;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tbackground-color: #ecf0f1;\r\n\t\tborder-radius: 12rpx;\r\n\t\tborder: 2rpx dashed #bdc3c7;\r\n\t}\r\n\r\n\t.placeholder-text {\r\n\t\tcolor: #7f8c8d;\r\n\t\tfont-size: 28rpx;\r\n\t}\r\n\r\n\t.text-section {\r\n\t\tpadding: 40rpx 20rpx;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.guidance-text {\r\n\t\tfont-size: 36rpx;\r\n\t\tcolor: #2c3e50;\r\n\t\tline-height: 1.6;\r\n\t\tfont-weight: 500;\r\n\t}\r\n\r\n\t/* 退出区域样式 */\r\n\t.exit-section {\r\n\t\twidth: 100%;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 20rpx;\r\n\t\tpadding-bottom: 40rpx;\r\n\t\tposition: relative; /* 确保按钮在正确的层级 */\r\n\t\tz-index: 200; /* 确保按钮在手势提示之上 */\r\n\t}\r\n\r\n\t.exit-button {\r\n\t\tbackground-color: #27ae60;\r\n\t\tcolor: white;\r\n\t\tborder: none;\r\n\t\tborder-radius: 12rpx;\r\n\t\tpadding: 30rpx;\r\n\t\tfont-size: 32rpx;\r\n\t\twidth: 100%;\r\n\t\tcursor: pointer; /* 添加指针样式 */\r\n\t\ttouch-action: manipulation; /* 优化触摸响应 */\r\n\t}\r\n\r\n\t.exit-button:active {\r\n\t\tbackground-color: #229954;\r\n\t}\r\n\r\n\t.restart-button {\r\n\t\tbackground-color: #95a5a6;\r\n\t\tcolor: white;\r\n\t\tborder: none;\r\n\t\tborder-radius: 12rpx;\r\n\t\tpadding: 25rpx;\r\n\t\tfont-size: 28rpx;\r\n\t\twidth: 100%;\r\n\t\tcursor: pointer; /* 添加指针样式 */\r\n\t\ttouch-action: manipulation; /* 优化触摸响应 */\r\n\t}\r\n\r\n\t.restart-button:active {\r\n\t\tbackground-color: #7f8c8d;\r\n\t}\r\n\r\n\t/* 完成状态样式 */\r\n\t.completed-container {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\theight: 60vh;\r\n\t\tgap: 40rpx;\r\n\t}\r\n\r\n\t.completed-text {\r\n\t\tfont-size: 36rpx;\r\n\t\tcolor: #2c3e50;\r\n\t\ttext-align: center;\r\n\t}\r\n\t\r\n\t/* 手势提示样式 */\r\n\t.gesture-hint {\r\n\t\tposition: fixed;\r\n\t\tbottom: 120rpx; /* 提高位置，避免覆盖按钮 */\r\n\t\tleft: 50%;\r\n\t\ttransform: translateX(-50%);\r\n\t\tbackground-color: rgba(0, 0, 0, 0.6);\r\n\t\tborder-radius: 20rpx;\r\n\t\tpadding: 10rpx 20rpx;\r\n\t\tz-index: 100; /* 降低z-index，确保不会覆盖按钮 */\r\n\t\tpointer-events: none; /* 确保不会阻止点击事件 */\r\n\t}\r\n\t\r\n\t.hint-text {\r\n\t\tcolor: white;\r\n\t\tfont-size: 24rpx;\r\n\t\topacity: 0.8;\r\n\t}\r\n</style>\r\n","import MiniProgramPage from 'C:/Data/Projects/eatlater_mini260120/pages/index/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["InterventionState","uni","InterventionViewModel","wx"],"mappings":"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"}